"use strict";(self.webpackChunkmy_tutorial_wiki=self.webpackChunkmy_tutorial_wiki||[]).push([[985],{5370:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"Projet-Application-Python/Connecter-une-BD-\xe0-une-application-Python","title":"Connecter une base de donn\xe9es \xe0 une application Python avec pipx","description":"Sommaire","source":"@site/docs/Projet-Application-Python/Connecter-une-BD-\xe0-une-application-Python.md","sourceDirName":"Projet-Application-Python","slug":"/Projet-Application-Python/Connecter-une-BD-\xe0-une-application-Python","permalink":"/Nyxosaurus/docs/Projet-Application-Python/Connecter-une-BD-\xe0-une-application-Python","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Projet-Application-Python/Connecter-une-BD-\xe0-une-application-Python.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Cr\xe9er une application Python","permalink":"/Nyxosaurus/docs/Projet-Application-Python/Cr\xe9er-une-application-Python"},"next":{"title":"Afficher le contenu de la BD sur la page Web","permalink":"/Nyxosaurus/docs/Projet-Application-Python/Integrer-une-DB-a-une-page-web"}}');var r=s(4848),t=s(8453);const a={},l="Connecter une base de donn\xe9es \xe0 une application Python avec pipx",o={},c=[{value:"Sommaire",id:"sommaire",level:2},{value:"1. Installation de MariaDB sur Ubuntu Server",id:"1-installation-de-mariadb-sur-ubuntu-server",level:2},{value:"S\xe9curisation de l\u2019installation",id:"s\xe9curisation-de-linstallation",level:3},{value:"Cr\xe9ation d\u2019une base de donn\xe9es et d\u2019un utilisateur",id:"cr\xe9ation-dune-base-de-donn\xe9es-et-dun-utilisateur",level:3},{value:"2. Gestion s\xe9curis\xe9e des identifiants avec un fichier <code>.env</code>",id:"2-gestion-s\xe9curis\xe9e-des-identifiants-avec-un-fichier-env",level:2},{value:"3. Installer pipx et les d\xe9pendances Python",id:"3-installer-pipx-et-les-d\xe9pendances-python",level:2},{value:"a. Installer pipx",id:"a-installer-pipx",level:3},{value:"b. Installer les d\xe9pendances avec pipx",id:"b-installer-les-d\xe9pendances-avec-pipx",level:3},{value:"4. Exemple d\u2019arborescence de projet",id:"4-exemple-darborescence-de-projet",level:2},{value:"5. Connexion \xe0 MariaDB en Python avec pipx",id:"5-connexion-\xe0-mariadb-en-python-avec-pipx",level:2},{value:"6. Bonnes pratiques suppl\xe9mentaires",id:"6-bonnes-pratiques-suppl\xe9mentaires",level:2},{value:"En r\xe9sum\xe9",id:"en-r\xe9sum\xe9",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"connecter-une-base-de-donn\xe9es-\xe0-une-application-python-avec-pipx",children:"Connecter une base de donn\xe9es \xe0 une application Python avec pipx"})}),"\n",(0,r.jsx)(n.h2,{id:"sommaire",children:"Sommaire"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#1-installation-de-mariadb-sur-ubuntu-server",children:"Installation de MariaDB sur Ubuntu Server"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsxs)(n.a,{href:"#2-gestion-s%C3%A9curis%C3%A9e-des-identifiants-avec-un-fichier-env",children:["Gestion s\xe9curis\xe9e des identifiants avec un fichier ",(0,r.jsx)(n.code,{children:".env"})]})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#3-installer-pipx-et-les-d%C3%A9pendances-python",children:"Installer pipx et les d\xe9pendances Python"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#4-exemple-darborescence-de-projet",children:"Exemple d\u2019arborescence de projet"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#5-connexion-%C3%A0-mariadb-en-python-avec-pipx",children:"Connexion \xe0 MariaDB en Python avec pipx"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#6-bonnes-pratiques-suppl%C3%A9mentaires",children:"Bonnes pratiques suppl\xe9mentaires"})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"1-installation-de-mariadb-sur-ubuntu-server",children:"1. Installation de MariaDB sur Ubuntu Server"}),"\n",(0,r.jsx)(n.p,{children:"Sur la VM Ubuntu Server, ex\xe9cute\u202f:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install mariadb-server mariadb-client -y\n"})}),"\n",(0,r.jsx)(n.p,{children:"V\xe9rifie que le service fonctionne\u202f:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo systemctl status mariadb\n"})}),"\n",(0,r.jsx)(n.h3,{id:"s\xe9curisation-de-linstallation",children:"S\xe9curisation de l\u2019installation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo mysql_secure_installation\n"})}),"\n",(0,r.jsx)(n.p,{children:"R\xe9ponds aux questions pour\u202f:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"D\xe9finir un mot de passe root"}),"\n",(0,r.jsx)(n.li,{children:"Supprimer les utilisateurs anonymes"}),"\n",(0,r.jsx)(n.li,{children:"D\xe9sactiver la connexion root \xe0 distance"}),"\n",(0,r.jsx)(n.li,{children:"Supprimer la base de test"}),"\n",(0,r.jsx)(n.li,{children:"Recharger les tables de privil\xe8ges"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"cr\xe9ation-dune-base-de-donn\xe9es-et-dun-utilisateur",children:"Cr\xe9ation d\u2019une base de donn\xe9es et d\u2019un utilisateur"}),"\n",(0,r.jsx)(n.p,{children:"Connecte-toi au shell MariaDB\u202f:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo mariadb\n"})}),"\n",(0,r.jsx)(n.p,{children:"Cr\xe9e une base de donn\xe9es et un utilisateur\u202f:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE DATABASE nom_de_la_base;\nGRANT ALL ON nom_de_la_base.* TO 'utilisateur'@'localhost' IDENTIFIED BY 'mot_de_passe' WITH GRANT OPTION;\nFLUSH PRIVILEGES;\n"})}),"\n",(0,r.jsx)(n.p,{children:"V\xe9rifie la cr\xe9ation\u202f:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SHOW DATABASES;\nSELECT User, Host FROM mysql.user;\nexit\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"2-gestion-s\xe9curis\xe9e-des-identifiants-avec-un-fichier-env",children:["2. Gestion s\xe9curis\xe9e des identifiants avec un fichier ",(0,r.jsx)(n.code,{children:".env"})]}),"\n",(0,r.jsxs)(n.p,{children:["Cr\xe9e un fichier ",(0,r.jsx)(n.code,{children:".env"})," \xe0 la racine de ton projet\u202f:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"DB_HOST=localhost\nDB_USER=mon_utilisateur\nDB_PASSWORD=mon_mot_de_passe\nDB_NAME=ma_base\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Ajoute ",(0,r.jsx)(n.code,{children:".env"})," \xe0 ton ",(0,r.jsx)(n.code,{children:".gitignore"})," pour ne jamais le pousser sur GitHub."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-installer-pipx-et-les-d\xe9pendances-python",children:"3. Installer pipx et les d\xe9pendances Python"}),"\n",(0,r.jsx)(n.h3,{id:"a-installer-pipx",children:"a. Installer pipx"}),"\n",(0,r.jsx)(n.p,{children:"Sur la plupart des distributions Linux\u202f:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"python3 -m pip install --user pipx\npython3 -m pipx ensurepath\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Remarque\u202f:"})," Red\xe9marre ton terminal ou ex\xe9cute ",(0,r.jsx)(n.code,{children:"source ~/.bashrc"})," si la commande ",(0,r.jsx)(n.code,{children:"pipx"})," n\u2019est pas reconnue."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"b-installer-les-d\xe9pendances-avec-pipx",children:"b. Installer les d\xe9pendances avec pipx"}),"\n",(0,r.jsx)(n.p,{children:"Utilise pipx pour installer et ex\xe9cuter les modules n\xe9cessaires\u202f:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pipx install mysql-connector-python\npipx install python-dotenv\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-exemple-darborescence-de-projet",children:"4. Exemple d\u2019arborescence de projet"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"mon_projet/\n\u251c\u2500\u2500 app.py\n\u251c\u2500\u2500 .env              # Ignor\xe9 par git, contient les identifiants r\xe9els\n\u251c\u2500\u2500 .env.example      # Version sans secrets \xe0 partager\n\u251c\u2500\u2500 .gitignore\n\u2514\u2500\u2500 ...\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-connexion-\xe0-mariadb-en-python-avec-pipx",children:"5. Connexion \xe0 MariaDB en Python avec pipx"}),"\n",(0,r.jsx)(n.p,{children:"Tu peux lancer ton script Python avec les d\xe9pendances g\xe9r\xe9es par pipx\u202f:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import os\nfrom dotenv import load_dotenv\nimport mysql.connector\n\nload_dotenv()\n\ntry:\n    connection = mysql.connector.connect(\n        host=os.getenv('DB_HOST'),\n        user=os.getenv('DB_USER'),\n        password=os.getenv('DB_PASSWORD'),\n        database=os.getenv('DB_NAME')\n    )\n    if connection.is_connected():\n        print(\"\u2705 Connexion r\xe9ussie \xe0 MariaDB\")\nexcept mysql.connector.Error as e:\n    print(f\"\u274c Erreur de connexion : {e}\")\nfinally:\n    if 'connection' in locals() and connection.is_connected():\n        connection.close()\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Pour ex\xe9cuter ton script avec pipx"})," (si besoin, adapte le chemin)\u202f:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pipx runpip mysql-connector-python install python-dotenv\npipx run --spec mysql-connector-python python app.py\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"pipx run"})," permet d\u2019ex\xe9cuter un script Python avec les paquets install\xe9s par pipx, sans polluer l\u2019environnement global."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"6-bonnes-pratiques-suppl\xe9mentaires",children:"6. Bonnes pratiques suppl\xe9mentaires"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Fournis un fichier ",(0,r.jsx)(n.code,{children:".env.example"})]})," (structure sans valeurs sensibles) :"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"DB_HOST=\nDB_USER=\nDB_PASSWORD=\nDB_NAME=\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Ne jamais pousser ",(0,r.jsx)(n.code,{children:".env"})]})," ou toute information sensible sur GitHub."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"S\xe9pare tes environnements"})," (d\xe9veloppement, production) avec diff\xe9rents fichiers ",(0,r.jsx)(n.code,{children:".env"})," si besoin."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"en-r\xe9sum\xe9",children:"En r\xe9sum\xe9"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"pipx permet d\u2019installer et d\u2019ex\xe9cuter des paquets Python de fa\xe7on isol\xe9e, sans venv ni pip global."}),"\n",(0,r.jsx)(n.li,{children:"Tu peux facilement g\xe9rer tes d\xe9pendances m\xeame dans des environnements o\xf9 pip install ne fonctionne pas."}),"\n",(0,r.jsx)(n.li,{children:"La connexion \xe0 MariaDB se fait comme d\u2019habitude, en important les modules via pipx."}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>l});var i=s(6540);const r={},t=i.createContext(r);function a(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);