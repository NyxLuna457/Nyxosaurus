"use strict";(self.webpackChunkmy_tutorial_wiki=self.webpackChunkmy_tutorial_wiki||[]).push([[1475],{4418:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>d,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"Mariadb perplexity","title":"D\xe9ploiement d\u2019un projet Python avec MariaDB, GitHub et gestion s\xe9curis\xe9e des identifiants","description":"Sommaire","source":"@site/docs/Mariadb perplexity.md","sourceDirName":".","slug":"/Mariadb perplexity","permalink":"/Nyxosaurus/docs/Mariadb perplexity","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Mariadb perplexity.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Cr\xe9er une app python","permalink":"/Nyxosaurus/docs/Cr\xe9er une app python"},"next":{"title":"Connexion \xe0 une base MariaDB avec une application Python","permalink":"/Nyxosaurus/docs/connexion_mariadb_python"}}');var s=i(4848),t=i(8453);const d={},a="D\xe9ploiement d\u2019un projet Python avec MariaDB, GitHub et gestion s\xe9curis\xe9e des identifiants",o={},l=[{value:"Sommaire",id:"sommaire",level:2},{value:"1. Installation de MariaDB sur Ubuntu Server",id:"1-installation-de-mariadb-sur-ubuntu-server",level:2},{value:"Sur la VM Ubuntu Server, ex\xe9cute les commandes suivantes\u202f:",id:"sur-la-vm-ubuntu-server-ex\xe9cute-les-commandes-suivantes",level:3},{value:"S\xe9curisation de l\u2019installation",id:"s\xe9curisation-de-linstallation",level:3},{value:"Cr\xe9ation d\u2019une base de donn\xe9es et d\u2019un utilisateur",id:"cr\xe9ation-dune-base-de-donn\xe9es-et-dun-utilisateur",level:3},{value:"2. Gestion s\xe9curis\xe9e des identifiants avec un fichier <code>.env</code>",id:"2-gestion-s\xe9curis\xe9e-des-identifiants-avec-un-fichier-env",level:2},{value:"a. Cr\xe9er un fichier <code>.env</code>",id:"a-cr\xe9er-un-fichier-env",level:3},{value:"b. Ignorer le fichier <code>.env</code> dans Git",id:"b-ignorer-le-fichier-env-dans-git",level:3},{value:"c. Charger le <code>.env</code> dans ton code Python",id:"c-charger-le-env-dans-ton-code-python",level:3},{value:"Pousser le code (hors <code>.env</code>)",id:"pousser-le-code-hors-env",level:3}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"d\xe9ploiement-dun-projet-python-avec-mariadb-github-et-gestion-s\xe9curis\xe9e-des-identifiants",children:"D\xe9ploiement d\u2019un projet Python avec MariaDB, GitHub et gestion s\xe9curis\xe9e des identifiants"})}),"\n",(0,s.jsx)(n.h2,{id:"sommaire",children:"Sommaire"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#1-installation-de-mariadb-sur-ubuntu-server",children:"Installation de MariaDB sur Ubuntu Server"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsxs)(n.a,{href:"#2-gestion-s%C3%A9curis%C3%A9e-des-identifiants-avec-un-fichier-env",children:["Gestion s\xe9curis\xe9e des identifiants avec un fichier ",(0,s.jsx)(n.code,{children:".env"})]})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#3-versionner-et-d%C3%A9ployer-avec-gitgithub",children:"Versionner et d\xe9ployer avec Git/GitHub"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#4-bonnes-pratiques-suppl%C3%A9mentaires",children:"Bonnes pratiques suppl\xe9mentaires"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#5-exemple-darborescence-de-projet",children:"Exemple d\u2019arborescence de projet"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#6-exemple-de-connexion-%C3%A0-mariadb-en-python",children:"Exemple de connexion \xe0 MariaDB en Python"})}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"1-installation-de-mariadb-sur-ubuntu-server",children:"1. Installation de MariaDB sur Ubuntu Server"}),"\n",(0,s.jsx)(n.h3,{id:"sur-la-vm-ubuntu-server-ex\xe9cute-les-commandes-suivantes",children:"Sur la VM Ubuntu Server, ex\xe9cute les commandes suivantes\u202f:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install mariadb-server mariadb-client -y\n"})}),"\n",(0,s.jsx)(n.p,{children:"V\xe9rifie que le service fonctionne\u202f:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"sudo systemctl status mariadb\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"s\xe9curisation-de-linstallation",children:"S\xe9curisation de l\u2019installation"}),"\n",(0,s.jsx)(n.p,{children:"Lance le script de s\xe9curisation fourni par MariaDB :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"sudo mysql_secure_installation\n"})}),"\n",(0,s.jsx)(n.p,{children:"R\xe9ponds aux questions pour\u202f:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"D\xe9finir un mot de passe root"}),"\n",(0,s.jsx)(n.li,{children:"Supprimer les utilisateurs anonymes"}),"\n",(0,s.jsx)(n.li,{children:"D\xe9sactiver la connexion root \xe0 distance"}),"\n",(0,s.jsx)(n.li,{children:"Supprimer la base de test"}),"\n",(0,s.jsx)(n.li,{children:"Recharger les tables de privil\xe8ges"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Il est recommand\xe9 de r\xe9pondre ",(0,s.jsx)(n.strong,{children:"Y"})," \xe0 toutes les questions pour une configuration s\xe9curis\xe9e."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"cr\xe9ation-dune-base-de-donn\xe9es-et-dun-utilisateur",children:"Cr\xe9ation d\u2019une base de donn\xe9es et d\u2019un utilisateur"}),"\n",(0,s.jsx)(n.p,{children:"Connecte-toi au shell MariaDB :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"sudo mariadb\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Cr\xe9e une base de donn\xe9es (remplace ",(0,s.jsx)(n.code,{children:"nom_de_la_base"})," par le nom souhait\xe9) :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"CREATE DATABASE nom_de_la_base;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Cr\xe9e un utilisateur (remplace ",(0,s.jsx)(n.code,{children:"utilisateur"}),", ",(0,s.jsx)(n.code,{children:"mot_de_passe"})," et ",(0,s.jsx)(n.code,{children:"nom_de_la_base"})," par tes valeurs) :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"GRANT ALL ON nom_de_la_base.* TO 'utilisateur'@'localhost' IDENTIFIED BY 'mot_de_passe' WITH GRANT OPTION; \n#WITH GRANT OPTION permet de donner le droit \xe0 l'utilisateur de donner les m\xeames droits que celui dont il dispose \xe0 d'autres utilisateurs\n"})}),"\n",(0,s.jsx)(n.p,{children:"Recharge les privil\xe8ges pour appliquer les changements\u202f:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"FLUSH PRIVILEGES;\n"})}),"\n",(0,s.jsx)(n.p,{children:"V\xe9rifie la cr\xe9ation de la base de donn\xe9es et de l\u2019utilisateur si besoin :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"SHOW DATABASES;\nSELECT User, Host FROM mysql.user;\n"})}),"\n",(0,s.jsx)(n.p,{children:"Quitte le shell MariaDB\u202f:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"exit\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h2,{id:"2-gestion-s\xe9curis\xe9e-des-identifiants-avec-un-fichier-env",children:["2. Gestion s\xe9curis\xe9e des identifiants avec un fichier ",(0,s.jsx)(n.code,{children:".env"})]}),"\n",(0,s.jsxs)(n.h3,{id:"a-cr\xe9er-un-fichier-env",children:["a. Cr\xe9er un fichier ",(0,s.jsx)(n.code,{children:".env"})]}),"\n",(0,s.jsxs)(n.p,{children:["\xc0 la racine de ton projet, cr\xe9e un fichier nomm\xe9 ",(0,s.jsx)(n.code,{children:".env"}),"\u202f:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"DB_HOST=localhost\nDB_USER=mon_utilisateur\nDB_PASSWORD=mon_mot_de_passe\nDB_NAME=ma_base\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"b-ignorer-le-fichier-env-dans-git",children:["b. Ignorer le fichier ",(0,s.jsx)(n.code,{children:".env"})," dans Git"]}),"\n",(0,s.jsxs)(n.p,{children:["Cr\xe9er un fichier ",(0,s.jsx)(n.code,{children:".gitignore"})," dans la racine de ton dossier",(0,s.jsx)(n.br,{}),"\n","Ajoute ",(0,s.jsx)(n.code,{children:".env"})," \xe0 ton fichier ",(0,s.jsx)(n.code,{children:".gitignore"}),"\u202f(il s'agit juste d'\xe9crire ",(0,s.jsx)(n.code,{children:".env"})," dans le fichier ",(0,s.jsx)(n.code,{children:".gitignore"}),"et de le sauvegarder. Github se chargera d'interpr\xe9ter le .gitignore tout seul)"]}),"\n",(0,s.jsxs)(n.h3,{id:"c-charger-le-env-dans-ton-code-python",children:["c. Charger le ",(0,s.jsx)(n.code,{children:".env"})," dans ton code Python"]}),"\n",(0,s.jsx)(n.p,{children:"Installe la librairie python-dotenv :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"pip install python-dotenv\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Dans ton script Python (exemple\u202f: ",(0,s.jsx)(n.code,{children:"app.py"}),"), ajoute\u202f:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import os\nfrom dotenv import load_dotenv\n\nload_dotenv() # charge le fichier .env\n\ndb_host = os.getenv("DB_HOST")\ndb_user = os.getenv("DB_USER")\ndb_password = os.getenv("DB_PASSWORD")\ndb_name = os.getenv("DB_NAME")\n'})}),"\n",(0,s.jsx)(n.admonition,{title:"Faire Attention",type:"danger",children:(0,s.jsxs)(n.p,{children:["En bonne pratique de scripting, faite attention \xe0 rajouter les imports en haut du script et le restant AVANT la ligne de fin de script python (qui doit ressembler \xe0 \xe7a ",(0,s.jsx)(n.code,{children:"if __name__ == '__main__':     app.run(host='0.0.0.0', port=5000, debug=True))"})]})}),"\n",(0,s.jsxs)(n.h3,{id:"pousser-le-code-hors-env",children:["Pousser le code (hors ",(0,s.jsx)(n.code,{children:".env"}),")"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'git add .\ngit commit -m "nomducommit"\ngit push\n\n\n\n'})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>a});var r=i(6540);const s={},t=r.createContext(s);function d(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);